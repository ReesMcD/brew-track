{% extends "bar/base.html" %}
{% block content %}

<h1>{{ bar.name }}</h1>
<p>Welcome to the {{ bar.name }} brewTrack page!</p>

{% if user.is_authenticated %}
<h2>{{menu.name}} <a id="item-add" uk-icon="plus" href="#add-item" uk-toggle></a></h2>

{# Form of adding a new item to a menu #}
<div id="add-item" uk-modal>
    <div class="uk-modal-dialog">
        <button class="uk-modal-close-default" type="button" uk-close></button>
        <div class="uk-modal-header">
            <h2 class="uk-modal-title">Add Item</h2>
        </div>

        <form method="post" action="">
            {% csrf_token %}
            <div class="uk-modal-body">

                {% include 'bar/item_form_temp.html'%}

            </div>
            <div class="uk-modal-footer uk-text-right">
                <button class="uk-button uk-button-default uk-modal-close" type="button">Cancel</button>
                <button class="uk-button uk-button-primary" type="submit">Save</button>
            </div>
        </form>

    </div>
</div>

{% else %}
<h2>{{menu.name}}</h2>
{% endif %}

<div uk-filter="target: .js-filter">

    <div class="uk-grid-small uk-grid-divider uk-child-width-auto" uk-grid>
        <div>
            <ul class="uk-subnav uk-subnav-pill" uk-margin>
                <li class="uk-active" uk-filter-control><a href="#">All</a></li>
            </ul>
        </div>

        <div>
            <ul class="uk-subnav uk-subnav-pill" uk-margin>
                {% for type in typeList %}
                <li uk-filter-control="[data-tags*='{{type}}']"><a href="#">{{type}}</a></li>
                {% endfor %}
            </ul>
        </div>

        <div>
            <ul class="uk-subnav uk-subnav-pill" uk-margin>
                {% for type in subList%}
                <li uk-filter-control="[data-tags*='{{type}}']"><a href="#">{{type}}</a></li>
                {% endfor %}
            </ul>
        </div>

    </div>

{# Item Cards #}
    <div class="js-filter uk-grid-match uk-grid-small uk-child-width-1-3@s uk-flex-left" uk-grid>
        {% for item in menuList %}
        <div data-tags="{{item.type}} {{item.subtype}}">
            <div class="uk-card uk-card-default uk-card-hover uk-card-body uk-animation-fade">
                {% if user.is_authenticated %}
                <a class="uk-card-badge" uk-icon="settings" href="#edit-item-{{item.id}}" uk-toggle></a>
                {% endif %}
                <div class="uk-flex uk-flex-middle">
                    <h3 class="uk-card-title uk-margin-remove-bottom">{{item.name}}</h3>
                    <p class="item-size uk-card-title ">{{item.size}} oz.</p>
                </div>

                <div>{{item.subtype}}</div>
                <div>
                    ${{item.price}}
                </div>
                {% if item.location %}
                <div>
                    <span uk-icon="location"></span> {{item.location}}
                </div>
                {% endif %}
                {% if item.amount_flag %}
                <progress class="uk-progress" value="{{item.current_amount}}" min="0" max="{{item.total_amount}}"></progress>
                {% endif %}
            </div>
        </div>

        {# Form for editing an item #}
        <div id="edit-item-{{item.id}}" uk-modal>
            <div class="uk-modal-dialog">
                <button class="uk-modal-close-default" type="button" uk-close></button>
                <div class="uk-modal-header">
                    <h2 class="uk-modal-title">Edit {{item.name}}</h2>
                </div>
                <div class="uk-modal-body">
                    <p>Form for editing {{item.name}} will be here</p>
                </div>
                <div class="uk-modal-footer uk-text-right">
                    <button class="uk-button uk-button-default uk-modal-close" type="button">Cancel</button>
                    <button class="uk-button uk-button-primary" type="button">Save</button>
                </div>
            </div>
        </div>

        {% endfor %}
    </div>

</div>

<script type="text/javascript">

</script>

{% endblock content %}
